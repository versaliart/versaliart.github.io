/* =========================================================
   Starfield v2.0 — EDGE-ONLY (outline sparkles for Shape Block)
   - No ambient .star-container layer is used or referenced
   - Quantity, sizing, and timing all inherit from CSS vars
   - Works with the edge-sampler JS that targets an exact block ID
========================================================= */

/* ---- Global variables you can tune site-wide ---- */
body.has-starfield{
  /* How many stars to place ALONG the SVG PATH (edge sampler reads this) */
  --star-count: 45;

  /* Twinkle timing (seconds) */
  --twinkle-min: 0.5;
  --twinkle-max: 2.0;

  /* Opacity range for stars */
  --opacity-min: 0.15;
  --opacity-max: 1.0;

  /* Size quantization using φ (golden ratio) */
  --phi: 1.618;
  --size-large: 1.5rem;                                 /* L base */
  --size-medium: calc(var(--size-large) / var(--phi));  /* ≈ 0.927rem */
  --size-small:  calc(var(--size-medium) / var(--phi)); /* ≈ 0.573rem */

  /* Soft glow */
  --max-blur: 0.12rem;

  /* Visuals */
  --star-color: #9989EC;
  --star-url: url("https://www.mysticmunson.design/s/MMsparkle.svg");
}

/* =========================================================
   Edge-outline layer (inserted by JS INSIDE the Shape Block)
   The JS creates <div class="shape-edge-sparkles">…</div>
========================================================= */
.shape-edge-sparkles{
  position: absolute;
  inset: 0;
  pointer-events: none;     /* clicks pass through to the block */
  z-index: 1;               /* adjust if you want it under/over nearby content */
}

/* Individual stars placed along the SVG path */
.shape-edge-sparkles .star{
  position: absolute;
  left: var(--x, 50%);
  top:  var(--y, 50%);

  width:  var(--size, 1rem);
  height: var(--size, 1rem);

  transform: translate(-50%, -50%) scale(var(--scale, 1));
  opacity: var(--o, 0.85);
  color: var(--star-color);
  background: currentColor;                     /* solid fill; masked to star shape */

  -webkit-mask: var(--star-url) center/contain no-repeat;
          mask: var(--star-url) center/contain no-repeat;

  filter: drop-shadow(0 0 var(--blur, 0) currentColor);
  will-change: opacity, transform;

  /* Edge version: twinkle only (no drift),
     timing provided per-star via inline vars from JS */
  animation: twinkle var(--twinkle, 4s) ease-in-out var(--tw-delay, 0s)
             infinite alternate !important;
}

/* =========================================================
   Motion
========================================================= */
@keyframes twinkle{
  0%   { opacity: 0.15; }
  50%  { opacity: 1;    }
  100% { opacity: 0.25; }
}

@media (prefers-reduced-motion: reduce){
  .shape-edge-sparkles .star{
    animation: none !important;
    opacity: 0.6;
  }
}

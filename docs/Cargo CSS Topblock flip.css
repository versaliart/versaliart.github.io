/* Topblock Flip v1.40 â€” overlay split-doors (image halves) without moving DOM */

:root{
  --flip-dur-enter: 650ms;
  --flip-dur-exit:  650ms;
  --flip-ease-enter: cubic-bezier(.4,0,.2,1);
  --flip-ease-exit:  cubic-bezier(.4,0,.2,1);
  --flip-perspective: 1000px;
  --door-overlap: 0.5px; /* hide hairline seam at center */
}

.flip-section { position: relative; perspective: var(--flip-perspective); }
.flip-top     { position: relative; isolation: isolate; display:block; }

/* Anchor we paint the doors on (JS adds .flip-anchor on the chosen wrapper) */
.flip-top .flip-anchor{
  position: relative;         /* establishes the box for ::before/::after */
  display:block;
  width:100%;
}

/* Images behave predictably (preserve Squarespace sizing) */
.flip-top .flip-anchor img{
  display:block; width:100%; height:auto;
  transition: opacity var(--flip-dur-enter) var(--flip-ease-enter);
}

/* ---------- Split doors (only when ready) ---------- */
.flip-top.doors-ready .flip-anchor::before,
.flip-top.doors-ready .flip-anchor::after{
  content:"";
  position:absolute;
  top:0; bottom:0;
  width: calc(50% + var(--door-overlap));
  z-index:2;                                  /* above the real image */
  transform-style: preserve-3d;
  -webkit-backface-visibility: hidden; backface-visibility: hidden;
  pointer-events:none;

  /* Use the photo from JS */
  background-image: var(--flip-image);
  background-repeat:no-repeat;
  background-size: 200% 100%;
  transition: transform var(--flip-dur-enter) var(--flip-ease-enter);
}

/* Left half */
.flip-top.doors-ready .flip-anchor::before{
  left:0;
  transform-origin:left center;
  background-position:left center;
}

/* Right half */
.flip-top.doors-ready .flip-anchor::after{
  right:0;
  transform-origin:right center;
  background-position:right center;
}

/* Doors open on hover/tap (ready-only) */
.flip-top.doors-ready.hover .flip-anchor::before,
.flip-top.doors-ready.is-flipped .flip-anchor::before{ transform: rotateY(-180deg); }
.flip-top.doors-ready.hover .flip-anchor::after,
.flip-top.doors-ready.is-flipped .flip-anchor::after{  transform: rotateY(180deg);  }

/* Exit timing (unflip) */
.flip-top.doors-ready.ease-exit .flip-anchor::before,
.flip-top.doors-ready.ease-exit .flip-anchor::after{
  transition-duration: var(--flip-dur-exit);
  transition-timing-function: var(--flip-ease-exit);
}

/* Hide the real image ONLY when doors are ready & active */
.flip-top.doors-ready.hover .flip-anchor img,
.flip-top.doors-ready.is-flipped .flip-anchor img{ opacity:0; }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  .flip-top .flip-anchor::before,
  .flip-top .flip-anchor::after,
  .flip-top .flip-anchor img{ transition: none !important; }
}

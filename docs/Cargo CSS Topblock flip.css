/* ===== Topblock Split-Flip (Doors) v2.0===== */
:root{
  --flip-duration: 520ms;                   /* total door flip time */
  --flip-ease-out: cubic-bezier(.2,.7,.2,1);/* open */
  --flip-ease-in:  cubic-bezier(.2,.7,.2,1);/* close (can differ if you want) */
  --flip-perspective: 1000px;
}

/* Container that already exists in your build */
.flip-top{
  position: relative;
  perspective: var(--flip-perspective);
  touch-action: manipulation;
  /* ensure underlying content stays clickable when closed */
}

/* Your existing inner 3D wrapper */
.flip-top .flip-inner{
  position: relative;
  transform-style: preserve-3d;
}

/* Hide the original single-piece front (we’ll recreate it as two doors) */
.flip-top .flip-front{
  opacity: 0;
  pointer-events: none;
}

/* Doors host (auto-injected by JS) */
.flip-top .flip-doors{
  position: absolute;
  inset: 0;
  contain: layout paint;
  transform-style: preserve-3d;
  pointer-events: none; /* underlying content remains clickable */
}

/* Each door half */
.flip-top .flip-door{
  position: absolute;
  top: 0; bottom: 0;
  width: 50%;
  transform-style: preserve-3d;
  backface-visibility: hidden;
  will-change: transform;
  transition-property: transform;
  transition-duration: var(--flip-duration);
}

/* Origins for hinge behavior */
.flip-top .flip-door.left  { left: 0;  transform-origin: center left; }
.flip-top .flip-door.right { right: 0; transform-origin: center right; }

/* Different easing for open vs close */
.flip-top.is-open .flip-door{ transition-timing-function: var(--flip-ease-out); }
.flip-top.is-closed .flip-door{ transition-timing-function: var(--flip-ease-in); }

/* Faces inside each door */
.flip-top .face{
  position: absolute; inset: 0;
  backface-visibility: hidden;
  background-image: var(--flip-image);
  background-repeat: no-repeat;
  background-size: 200% 100%; /* 2 halves of one image */
  background-color: transparent;
}

/* Assign the correct half of the background to each door-face */
.flip-top .flip-door.left  .face{ background-position: left center; }
.flip-top .flip-door.right .face{ background-position: right center; }

/* Invisible backside (still needed for 3D correctness) */
.flip-top .back{ transform: rotateY(180deg); }

/* ----- States ----- */

/* Closed = doors together / image visible */
.flip-top.is-closed .flip-door.left  { transform: rotateY(0deg);    }
.flip-top.is-closed .flip-door.right { transform: rotateY(0deg);    }

/* Open = doors flipped out to edges (reveals the “back”, which is invisible) */
.flip-top.is-open .flip-door.left  { transform: rotateY(-180deg); }
.flip-top.is-open .flip-door.right { transform: rotateY(180deg);  }

/* Optional: initial state for first render (closed by default) */
.flip-top:not(.is-open):not(.is-closed){ /* default */ }

/* Enable hover-driven doors (unless explicitly disabled with .no-hover) */
.flip-top:not(.no-hover):hover .flip-door.left  { transform: rotateY(-180deg); }
.flip-top:not(.no-hover):hover .flip-door.right { transform: rotateY( 180deg);  }

/* Make sure the container actually receives hover */
.flip-top{ pointer-events: auto; }
.flip-top .flip-doors{ pointer-events: none; } /* underlying links remain clickable */

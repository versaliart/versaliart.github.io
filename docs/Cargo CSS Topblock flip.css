/* ===== Topblock Split-Flip (Doors) v2.42===== */

:root{
  --flip-duration: 520ms;
  --flip-ease-out: cubic-bezier(.2,.7,.2,1);
  --flip-ease-in:  cubic-bezier(.2,.7,.2,1);
  --flip-perspective: 1000px;
}

/* Opt-in marker added by JS: .flip-top */
.sqs-block.image-block.flip-top .fluid-image-container{
  perspective: var(--flip-perspective);
  transform-style: preserve-3d;
  position: relative;
}

/* Hide the <img> (we’ll redraw it as two doors); keeps layout intact */
.sqs-block.image-block.flip-top img[data-sqsp-image-block-image]{
  opacity: 0 !important;
}

/* Doors host (injected) */
.sqs-block.image-block.flip-top .flip-doors{
  position: absolute;
  inset: 0;
  border-radius: inherit;                /* match your rounded corners */
  overflow: hidden;                      /* respect radius/masks */
  transform-style: preserve-3d;
  pointer-events: none;                  /* clicks go to the link below */
  contain: layout paint;
}

/* Each door */
.sqs-block.image-block.flip-top .flip-door{
  position: absolute;
  top: 0; bottom: 0;
  width: 50%;
  will-change: transform;
  transform-style: preserve-3d;
  backface-visibility: hidden;
  transition-property: transform;
  transition-duration: var(--flip-duration);
}

/* Hinge origins */
.sqs-block.image-block.flip-top .flip-door.left  { left: 0;  transform-origin: center left; }
.sqs-block.image-block.flip-top .flip-door.right { right: 0; transform-origin: center right; }

/* Faces share the same image, split via background-position */
.sqs-block.image-block.flip-top .face{
  position: absolute; inset: 0;
  backface-visibility: hidden;
  background-repeat: no-repeat;
  background-color: transparent;
  /* size/position injected inline as pixels */
}
.sqs-block.image-block.flip-top .flip-door.left  .face{ background-position: left  center; }
.sqs-block.image-block.flip-top .flip-door.right .face{ background-position: right center; }
.sqs-block.image-block.flip-top .back{ transform: rotateY(180deg); }

/* Default (closed) */
.sqs-block.image-block.flip-top .flip-door.left  { transform: rotateY(0deg); }
.sqs-block.image-block.flip-top .flip-door.right { transform: rotateY(0deg); }

/* Hover opens the doors outward; keep distinct eases on enter/leave */
.sqs-block.image-block.flip-top:hover .flip-door{ transition-timing-function: var(--flip-ease-out); }
.sqs-block.image-block.flip-top:not(:hover) .flip-door{ transition-timing-function: var(--flip-ease-in); }
.sqs-block.image-block.flip-top:hover .flip-door.left  { transform: rotateY(-180deg); }
.sqs-block.image-block.flip-top:hover .flip-door.right { transform: rotateY( 180deg); }

/* Ensure the block itself can receive hover while clicks still pass through */
.sqs-block.image-block.flip-top{ pointer-events: auto; }
.sqs-block.image-block.flip-top .flip-doors{ pointer-events: none; }

/* micro-overlap to hide the center seam */
:root{ --flip-seam: 1px; }  /* try .5px–1.5px depending on your screen */

.sqs-block.image-block.flip-top .flip-door.left  { margin-right: calc(-1 * var(--flip-seam)); }
.sqs-block.image-block.flip-top .flip-door.right { margin-left:  calc(-1 * var(--flip-seam)); }

/* extra stability while rotating */
.sqs-block.image-block.flip-top .flip-door { backface-visibility: hidden; transform-style: preserve-3d; }

/* Seam control */
:root{
  --flip-seam: 1px;              /* overlap when idle */
  --flip-seam-open: 2px;         /* a bit more overlap while flipping */
}

/* Make doors physically overlap instead of negative margins */
.sqs-block.image-block.flip-top .flip-door{
  width: calc(50% + var(--flip-seam));
}

.sqs-block.image-block.flip-top .flip-door.left  { left: 0;  transform-origin: center left; }
.sqs-block.image-block.flip-top .flip-door.right { right: 0; transform-origin: center right; }

/* While opening (hovering), increase the overlap to hide sub-pixel slivers */
.sqs-block.image-block.flip-top:hover .flip-door{
  width: calc(50% + var(--flip-seam-open));
}

/* Keep the right half infinitesimally in front to cover the join during rotation */
.sqs-block.image-block.flip-top .flip-door.right{
  transform: translateZ(0.1px) rotateY(0deg); /* Z gets composed with rotateY via transitions */
}
.sqs-block.image-block.flip-top.is-hovering .flip-door.right { /* if you used the class version */
  transform: translateZ(0.1px) rotateY(180deg);
}

/* Stabilizers */
.sqs-block.image-block.flip-top .face{
  backface-visibility: hidden;
  transform: translateZ(0); /* promote to its own layer */
}
.sqs-block.image-block.flip-top .flip-doors{
  overflow: hidden; /* keep overlap inside rounded corners */
}

/* hide the original img so nothing shows underneath */
.sqs-block.image-block.flip-top img[data-sqsp-image-block-image]{
  opacity: 0 !important;
}

/* consistent tiny overlap to kill sub-pixel cracks */
:root{ --flip-seam: 1px; } /* adjust 0.5px–1.5px if needed */

/* each door covers the FULL width; we clip to left/right + overlap */
.sqs-block.image-block.flip-top .flip-door{
  position: absolute;
  inset: 0;
  width: 100%;
  transform-style: preserve-3d;
  backface-visibility: hidden;
  will-change: transform;
  transition-property: transform;
}

/* hinge points */
.sqs-block.image-block.flip-top .flip-door.left  { transform-origin: center left;  z-index: 2; }
.sqs-block.image-block.flip-top .flip-door.right { transform-origin: center right; z-index: 3; transform: translateZ(0.1px) rotateY(0deg); }

/* clip to halves with a tiny overlap so there’s never daylight */
.sqs-block.image-block.flip-top .flip-door.left{
  clip-path: polygon(0 0, calc(50% + var(--flip-seam)) 0, calc(50% + var(--flip-seam)) 100%, 0 100%);
}
.sqs-block.image-block.flip-top .flip-door.right{
  clip-path: polygon(calc(50% - var(--flip-seam)) 0, 100% 0, 100% 100%, calc(50% - var(--flip-seam)) 100%);
}

/* faces paint the image (JS sets size/pos) */
.sqs-block.image-block.flip-top .face{
  position: absolute; inset: 0;
  background-repeat: no-repeat;
  background-color: transparent;
  backface-visibility: hidden;
  transform: translateZ(0); /* layer promotion */
}

/* wrapper keeps rounded corners etc. */
.sqs-block.image-block.flip-top .flip-doors{
  position: absolute; inset: 0;
  border-radius: inherit;
  overflow: hidden;
  pointer-events: none;
}

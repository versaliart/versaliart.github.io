/* ===== Topblock Split-Flip (Doors) v2.463 — FULL CSS ===== */

:root{
  --flip-duration: 520ms;
  --flip-ease-in:  cubic-bezier(.12,.6,.1,1); /* opening: slower/smoother */
  --flip-ease-out: cubic-bezier(.2,.7,.2,1);  /* closing: snappier */
  --flip-perspective: 1000px;

  /* tiny physical overlap so there's never "daylight" between halves */
  --flip-seam: 1px;     /* 0.75px–1.5px if you ever see a center sliver */

  /* optional: bleed to hide edge hairlines while rotating */
  --edge-bleed: 1px;    /* 0.75px–1.5px if needed */
}

/* Opt-in marker added by JS: .flip-top */
.sqs-block.image-block.flip-top .fluid-image-container{
  perspective: var(--flip-perspective);
  transform-style: preserve-3d;
  -webkit-transform-style: preserve-3d;
  position: relative;
}

/* Hide the original image; we redraw it on the doors */
.sqs-block.image-block.flip-top img[data-sqsp-image-block-image]{
  opacity: 0 !important;
}

/* Doors host (injected) */
.sqs-block.image-block.flip-top .flip-doors{
  position: absolute;
  inset: 0;
  border-radius: inherit;   /* match rounded corners/masks */
  overflow: hidden;
  transform-style: preserve-3d;
  -webkit-transform-style: preserve-3d;
  pointer-events: none;     /* clicks pass through to the underlying link */
  contain: layout paint;
}

/* Each door (physically wider than 50% so halves overlap) */
.sqs-block.image-block.flip-top .flip-door{
  position: absolute;
  top: 0; bottom: 0;
  width: calc(50% + var(--flip-seam));
  will-change: transform;
  transform-style: preserve-3d;
  -webkit-transform-style: preserve-3d;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  transition-property: transform;
  transition-duration: var(--flip-duration);
}

.sqs-block.image-block.flip-top .flip-door.left  { left: 0;  transform-origin: center left; }
.sqs-block.image-block.flip-top .flip-door.right { right: 0; transform-origin: center right; }

/* Keep right door infinitesimally "in front" to cover any AA at the join */
.sqs-block.image-block.flip-top .flip-door.right{
  transform: translateZ(0.1px) rotateY(0deg);
}

/* Faces — JS paints exact background-size/position (sub-pixel allowed) */
.sqs-block.image-block.flip-top .face{
  position: absolute;
  inset: 0;

  /* Edge bleed: extend the paint slightly beyond container; still clipped
     by .flip-doors overflow + radius. (If you use this, make sure your JS
     compensates backgroundPosition by +bleed on X/Y as discussed.) */
  inset: calc(-1 * var(--edge-bleed));

  background-repeat: no-repeat;
  background-color: transparent;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  transform: translateZ(0); /* layer promotion for stability */
}

/* Back faces */
.sqs-block.image-block.flip-top .back{ transform: rotateY(180deg); }

/* ----- States ----- */

/* Closed = image visible */
.sqs-block.image-block.flip-top .flip-door.left  { transform: rotateY(0deg); }
.sqs-block.image-block.flip-top .flip-door.right { transform: translateZ(0.1px) rotateY(0deg); }

/* Hover behavior (open/close timing + the actual flip) */
.sqs-block.image-block.flip-top .flip-door{
  transition-duration: var(--flip-duration);
}

/* opening (hover) eases in */
.sqs-block.image-block.flip-top:hover .flip-door{
  transition-timing-function: var(--flip-ease-in);
}
/* closing (not hover) eases out */
.sqs-block.image-block.flip-top:not(:hover) .flip-door{
  transition-timing-function: var(--flip-ease-out);
}

/* Rotate the halves on hover */
.sqs-block.image-block.flip-top:hover .flip-door.left  { transform: rotateY(-180deg); }
.sqs-block.image-block.flip-top:hover .flip-door.right { transform: translateZ(0.1px) rotateY(180deg); }

/* Ensure the block itself can receive hover while clicks still pass through */
.sqs-block.image-block.flip-top{ pointer-events: auto; }
.sqs-block.image-block.flip-top .flip-doors{ pointer-events: none; }
